"use strict";
var exports = {};
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var WINDOW=window,DOCUMENT=window.document,METAS_MAP={},SETTINGS={},BLUEKAI_SCRIPT_URL="//tags.bkrtx.com/js/bk-coretag.js",hasOwnProperty=Object.prototype.hasOwnProperty,ID=null,E_ID_S=null,MEMBER_ID=null,SITE_ID=null,NOTA_TAGS="",TAGS=document.querySelectorAll(".cnt-tags a"),TAG_NAME=null,NOTA_TAGS_LENGTH=null,ALL_TAGS=null;WINDOW.bk_async=function(){for(var e,t=[].concat(SETTINGS.metas),a=t.length,n=0;n<a;n++)(e=t[n])&&hasOwnProperty.call(e,"key")&&hasOwnProperty.call(e,"name")&&_track(e.key,getMetaByName(e.name));for(var o,r=[].concat(SETTINGS.attributes),l=0,i=r.length;l<i;l++)(o=r[l])&&hasOwnProperty.call(o,"key")&&hasOwnProperty.call(o,"value")&&_track(o.key,"function"==typeof o.value?o.value():o.value);SITE_ID=SETTINGS.siteId,ID&&_track("a_id",ID),MEMBER_ID&&(SITE_ID=SETTINGS.swapId,_track("idmember",MEMBER_ID)),E_ID_S&&_track("e_id_s",E_ID_S),ALL_TAGS=_allTags(),"object"===("undefined"==typeof BKTAG?"undefined":_typeof(BKTAG))?BKTAG.doTag(SITE_ID,1):console.log("@BKTAG is not defined"),addContainers(SETTINGS.containers)};var _allTags=function(){return(NOTA_TAGS=TAGS?(TAGS.forEach(function(e){TAG_NAME=e.text.toLowerCase().normalize("NFKD").replace(/[\u0300-\u036F]/g,"").replace(/ /g,""),NOTA_TAGS=NOTA_TAGS+TAG_NAME+","}),NOTA_TAGS=NOTA_TAGS.slice(0,-1),NOTA_TAGS_LENGTH=NOTA_TAGS.length,NOTA_TAGS.slice(0,NOTA_TAGS_LENGTH)):"").split(",")},_track=function(e,t){null!=t&&bk_addPageCtx(e,t)},_loadScript=function(e){var t=e.url,a=void 0===t?"":t,n=e.async,o=void 0===n||n,r=e.head,l=void 0!==r&&r,i=e.callback,c=DOCUMENT.createElement("script");if("function"==typeof i&&(c.onload=function(){return i()}),o&&(c.async=!0),c.src=a,l){var T=DOCUMENT.getElementsByTagName("script")[0];T?T.parentNode.insertBefore(c,T):(DOCUMENT.head||DOCUMENT.getElementsByTagName("head")[0]).appendChild(c)}else DOCUMENT.body.appendChild(c);return c},getMetaByName=function(e){return METAS_MAP[e]||""},_loadMetas=function(){for(var e=[].slice.call(DOCUMENT.getElementsByTagName("meta")),t=0,a=e.length;t<a;t++)METAS_MAP[e[t].getAttribute("name")||e[t].getAttribute("property")]=e[t].getAttribute("content")},addContainer=function(e){var t=e.id,a=void 0===t?null:t,n=e.name,o=void 0===n?null:n,r=e.callback;a&&o&&(_loadScript({url:"https://tags.bluekai.com/site/".concat(a,"?ret=js&limit=1"),callback:r}).id="bk-container-"+o.toLowerCase())},addContainers=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(addContainer)},BluekaiGEC=function(e){return Object.assign(SETTINGS,e),_loadMetas(),_loadScript({url:BLUEKAI_SCRIPT_URL,async:!0,head:!0}),{getMetaByName:getMetaByName,addContainers:addContainers,addContainer:addContainer}};(window.BluekaiGEC=BluekaiGEC).init=BluekaiGEC,"function"==typeof WINDOW.bk_gec_async&&bk_gec_async(BluekaiGEC);var _default=BluekaiGEC;exports.default=_default;